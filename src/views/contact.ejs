<%- include('templates/head') %> 
<body dir="rtl">
    <%- include('templates/nav-bar') %>

  <main class="contact">
    <h1 class="contact-header">יצירת קשר</h1>
    <div class="contact-wrapper">
         <form action="https://sheetdb.io/api/v1/feu6teft8mwgd" method="POST" class="form" id="sheetdb-form">
            <input type="text" placeholder="שם מלא" id="full-name" name="data[name]">
            <input type="email" placeholder="אימייל" id="email-input" name="data[email]">
            <input type="text" placeholder="נושא" id="message-subject" name="data[subject]">
            <textarea cols="30" rows="10" placeholder="הודעה" id="textarea" name="data[message]"></textarea>
            <input type="submit" id="submit" value="שלח">
        </form>
        <div dir="ltr" class="contact">
        <p>איריס בן-יוסף</p>
        <p>@: <a href="">dinairisby@gmail.com</a></p>  
        </div>
    </div>
  </main>


    <%- include('templates/footer') %>
    
<script>
  window.addEventListener('load', () => {
      const form = document.querySelector('.form');
      const submit = document.getElementById('submit');
  
      form.addEventListener('submit', (e) => {
      e.preventDefault();
            
      fetch(form.action, {
          method : "POST",
          body: new FormData(document.querySelector('.form')),
          }).then(
            response => response.json()
          ).then((html) => {
            alert('הפרטים נשלחו בהצלחה') ;
            window.open('/contact', 'blank');
              
          })
      })
   })



      // window.addEventListener('load', () => {
      //   const form = document.querySelector('.form');
      //   const submit = document.getElementById('submit');
    

      //   form.addEventListener('submit', (e) => {
      //     e.preventDefault();
        

      //   let formData = new FormData(form);


      //   alert( formData.get("data[name]") + ' - ' + formData.get("data[email]") 
      //   + ' - ' + formData.get("data[subject]") + ' - ' + formData.get("data[text]"));


      //   form.reset();
      //   document.addEventListener('DOMcontentLoaded', () => {

      //     submit.addEventListener('click', getDataForm, false);
          

      //   }, false)

      // })
      // })
      
    </script>

</body>
</html>